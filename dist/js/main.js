(()=>{var e={114:()=>{var e=function(){function e(e,t,n){var s=this;void 0===n&&(n=!1),this.emberBlobs=[],this.embers=new PIXI.Container,n&&(this.embers.filters=[new PIXI.filters.PixelateFilter]),e.map((function(e){var n=new PIXI.Graphics;n.lineStyle(0),n.beginFill(e,1),n.drawCircle(0,0,10),n.endFill(),s.emberBlobs.push(t.renderer.generateTexture(n))})),setInterval((function(){s.addEmber()}),300)}return e.prototype.stoke=function(){for(var e=40+Math.round(20*Math.random()),t=0;t<e;t++)this.addEmber()},e.prototype.makeBlob=function(){var e=this.emberBlobs[Math.floor(Math.random()*this.emberBlobs.length)],t=new PIXI.Sprite(e);t.anchor.set(.5);var n=Math.random();return t.scale.set(.4*n,.5*n),t},e.prototype.addEmber=function(){var e=this,t=this.time*(.3+.6*Math.random()),n=this.makeBlob();this.embers.addChild(n);var s=[{x:100*Math.random()-50,y:-100},{x:200*Math.random()-100,y:-20*Math.random()-100},{x:200*Math.random()-100,y:-50*Math.random()-100},{x:200*Math.random()-100,y:-50*Math.random()-200},{x:300*Math.random()-150,y:-100*Math.random()-250},{x:500*Math.random()-250,y:-150*Math.random()-500}];TweenMax.to(n,t/2,{delay:t/2,ease:Power1.easeOut,alpha:0}),TweenMax.to(n.position,t,{ease:Power1.easeOut,bezier:s,onComplete:function(){e.embers.removeChild(n),n=null}})},Object.defineProperty(e.prototype,"time",{get:function(){return 2+1.5*Math.random()},enumerable:!1,configurable:!0}),e}(),t=function(){function e(e,t,n){var s=this;void 0===n&&(n=!1),this.flame=new PIXI.Container,this.cutout=new PIXI.Container,this.fire=new PIXI.Container,this.flame.addChild(this.fire),this.flame.addChild(this.cutout),this.fire.alpha=.7;var o=new PIXI.Graphics;o.lineStyle(0),o.beginFill(e,1),o.drawCircle(0,0,65),o.endFill(),this.fireBlob=t.renderer.generateTexture(o);var i=new PIXI.Graphics;i.lineStyle(0),i.drawCircle(0,0,40),i.endFill(),this.cutoutBlob=t.renderer.generateTexture(i);var a={bloom:new PIXI.filters.AdvancedBloomFilter(.45,.5,.5),pixel:n?new PIXI.filters.PixelateFilter:new PIXI.filters.VoidFilter,void:new PIXI.filters.VoidFilter};this.flame.filters=[a.bloom,a.pixel,a.void],this.flame.filters[this.flame.filters.length-1].blendMode=PIXI.BLEND_MODES.SCREEN,setInterval((function(){s.addFlame(),s.addCutout(Math.random()>.5)}),50)}return e.prototype.makeBlob=function(e){var t=new PIXI.Sprite(e);return t.anchor.set(.5),t},e.prototype.addCutout=function(e){var t=this,n=this.time*(.7+.2*Math.random()),s=this.makeBlob(this.cutoutBlob);this.cutout.addChild(s);var o=[1,.75+1*Math.random()];s.position.x=(130+50*Math.random())*(e?-1:1);var i=(5+60*Math.random())*(e?-1:1);s.scale.set(o[0]),TweenMax.to(s,n,{ease:Power1.easeIn,pixi:{x:i,y:-270,scaleX:o[1],scaleY:o[1]},onComplete:function(){t.cutout.removeChild(s),s=null}})},e.prototype.addFlame=function(){var e=this,t=this.time,n=this.makeBlob(this.fireBlob);this.fire.addChild(n);var s,o,i,a=[1.2+Math.random(),.5+Math.random()],r=[{x:0,y:0},{x:100*Math.random()-50,y:-20*Math.random()},{x:100*Math.random()-50,y:-50*Math.random()-50},{x:0,y:-100*Math.random()-150}];n.scale.set(a[0]),TweenMax.to(n,t,(s={ease:Power1.easeIn,bezier:r},o="ease",i=Power0.easeOut,o in s?Object.defineProperty(s,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[o]=i,s)),TweenMax.to(n,t,{pixi:{scaleX:a[1],scaleY:a[1]},onComplete:function(){e.fire.removeChild(n),n=null}})},Object.defineProperty(e.prototype,"time",{get:function(){return 1+.4*Math.random()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{set:function(e){this.flame.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{set:function(e){this.flame.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{set:function(e){this.flame.scale.set(e)},enumerable:!1,configurable:!0}),e}();new function(n,s){var o=this;void 0===s&&(s=!1),this.flames=[],this.onResize=function(){this.app.renderer.resize(260,500),this.stage.position.x=130,this.stage.position.y=375},this.add=function(e,t){void 0===t&&(t=this.stage),t.addChild(e)},this.remove=function(e,t){void 0===t&&(t=this.stage),t.removeChild(e)},this.app=new PIXI.Application(300,300,{antialias:!0,backgroundColor:0,transparent:!0}),n.appendChild(this.app.view),this.stage=new PIXI.Container,this.flamesContainer=new PIXI.Container,this.add(this.stage,this.app.stage),this.add(this.flamesContainer),this.flamesContainer.scale.set(.75);var i=new e([16686080,16688640,14840064],this.app,s);this.add(i.embers,this.flamesContainer),[{color:14826240,scale:1,offset:-30},{color:16679424,scale:1,offset:-10},{color:16507926,scale:.9,offset:10},{color:16645556,scale:.7,offset:30}].map((function(e){var n=new t(e.color,o.app,s);o.flames.push(n),n.y=e.offset,n.scale=e.scale,n.flame.pivot.set(0,10),o.add(n.flame,o.flamesContainer)})),this.onResize();var a=this.flames.map((function(e){return e.flame}));a.pop(),this.stokeAnimation=new TimelineMax,this.stokeAnimation.to(a,.3,{ease:Power2.easeOut,pixi:{scaleY:1.2,scaleX:1.15}}),this.stokeAnimation.to(a,1.4,{ease:Bounce.easeOut,pixi:{scaleY:1,scaleX:1}}),this.stokeAnimation.stop(),window.addEventListener("resize",(function(e){o.onResize()})),window.addEventListener("click",(function(e){i.stoke(),o.stokeAnimation.restart()}))}(document.getElementById("canvas"),!1,"transparent")}},t={};function n(s){if(t[s])return t[s].exports;var o=t[s]={exports:{}};return e[s](o,o.exports,n),o.exports}(()=>{"use strict";const e={$modalButtons:document.querySelectorAll("[data-popupbtn]"),$modals:document.querySelectorAll("[data-popup]"),init:function(){window.modalsData={},this.$modals.length&&this.$modals.forEach((function(e){var t=e.getAttribute("data-popup");window.modalsData[t]={},window.modalsData[t].isOpen=!1})),this.$modalButtons.length&&this.$modalButtons.forEach((function(e){var t=e.getAttribute("data-popupbtn");e.addEventListener("click",(function(){document.dispatchEvent(new Event(t+"Opened")),window.openPopup(t),window.modalsData[t].isOpen=!0}))})),this.$modals.length&&this.$modals.forEach((function(e){var t=e.getAttribute("data-popup");e.addEventListener("click",(function(e){(e.target.classList.contains("modal__content")||e.target.classList.contains("modal__close")||e.target.classList.contains("modal-close"))&&(document.dispatchEvent(new Event(t+"Closed")),window.closePopup(t),window.modalsData[t].isOpen=!1)}))})),window.activePopups=[],window.openPopup=function(e){window.activePopups.length||window.pageScrollLock(),window.activePopups.push(e),document.querySelector("[data-popup=".concat(e,"]")).classList.add("show"),document.querySelector("[data-popup=".concat(e,"]")).classList.add("fade-in")},window.closePopup=function(e){window.activePopups=window.activePopups.filter((function(t){return t!==e})),window.activePopups.length||window.pageScrollAvailable(),document.querySelector("[data-popup=".concat(e,"]")).classList.add("fade-out"),setTimeout((function(){document.querySelector("[data-popup=".concat(e,"]")).classList.remove("show"),document.querySelector("[data-popup=".concat(e,"]")).classList.remove("fade-in"),document.querySelector("[data-popup=".concat(e,"]")).classList.remove("fade-out")}),300)},window.pageScrollLock=function(){var e=document.querySelector("body").offsetWidth-document.querySelector("body").offsetWidth+"px";document.body.style.paddingRight=e,document.body.classList.add("scrollock")},window.pageScrollAvailable=function(){document.body.style.paddingRight=0,document.body.classList.remove("scrollock")}}};const t={$play:document.querySelector("#play"),$chests:document.querySelectorAll(".game .list div"),chest:!1,$gamesLength:document.querySelector("#gamesLength"),$gamesToBuy:document.querySelector("#gamesToBuy"),$gamesCost:document.querySelector("#gamesCost"),$buy:document.querySelector("#buy"),init:function(){this.play(),this.dwarf(),this.dashboard()},play:function(){var e=this;this.$chests.forEach((function(t){t.addEventListener("click",(function(){e.chestHandler(t)}))})),this.$play.addEventListener("click",(function(){0!=e.$gamesLength.innerHTML?(e.$gamesLength.innerHTML=e.int(e.$gamesLength.innerHTML)-1,e.playBtnDisable(),e.chestsAvaiable()):e.setMessage("Нужно закупиться играми")}))},chestHandler:function(e){var t=this.chest?"treasure":"empty";this.chest?(this.setMessage("Сокровище!"),document.querySelector(".m-message .title").innerHTML="Поздравляем! Вы выиграли"):(this.setMessage("Повезёт в другой раз"),document.querySelector(".m-message .title").innerHTML="Не повезло! Попробуйте еще раз"),window.openPopup("message"),this.chest=!this.chest,this.chestAnimation(e,t),this.chestsDisable(),this.playBtnAvaiable()},playBtnDisable:function(){this.$play.style.pointerEvents="none"},playBtnAvaiable:function(){this.$play.style.pointerEvents="auto"},chestsDisable:function(){this.$chests.forEach((function(e){e.style.pointerEvents="none",e.style.cursor="auto"}))},chestsAvaiable:function(){this.setMessage("Выбирай сундук!"),this.$chests.forEach((function(e){e.style.pointerEvents="auto",e.style.cursor="pointer",e.style.backgroundColor="rgba(255,255,255,0.1)",setTimeout((function(){e.style.backgroundColor="rgba(255,255,255,0)"}),300)}))},chestAnimation:function(e,t){var n=this;this.$play.style.pointerEvents="none",e.classList.add(t),setTimeout((function(){e.classList.add("".concat(t,"_done"))}),100),setTimeout((function(){e.classList.remove("".concat(t,"_done"))}),400),setTimeout((function(){e.classList.remove(t),n.$play.style.pointerEvents="auto"}),500)},dashboard:function(){var e=this;document.querySelector(".arrows .top").addEventListener("click",(function(){e.gamePlus()})),document.querySelector(".arrows .bottom").addEventListener("click",(function(){e.gameMinus()})),this.$buy.addEventListener("click",(function(){e.gamesLenUpdate()}))},gamePlus:function(){this.$gamesToBuy.innerHTML=this.int(this.$gamesToBuy.innerHTML)+1,this.$gamesCost.innerHTML=5*this.int(this.$gamesToBuy.innerHTML)},gameMinus:function(){0!=this.$gamesToBuy.innerHTML&&(this.$gamesToBuy.innerHTML=this.int(this.$gamesToBuy.innerHTML)-1,this.$gamesCost.innerHTML=5*this.int(this.$gamesToBuy.innerHTML))},gamesLenUpdate:function(){this.int(this.$gamesToBuy.innerHTML)>0?this.setMessage("Отличная покупка!<br>Пора играть!"):this.setMessage("Нужно выбрать количество игр для покупки."),this.$gamesLength.innerHTML=this.int(this.$gamesLength.innerHTML)+this.int(this.$gamesToBuy.innerHTML),this.$gamesToBuy.innerHTML=this.$gamesCost.innerHTML=0},dwarf:function(){var e=this;setInterval((function(){e.dwarfAnimation()}),1e4)},dwarfAnimation:function(){var e=document.querySelector(".dwarf img");e.setAttribute("src","./assets/dwarf.png"),setTimeout((function(){e.setAttribute("src","./assets/dwarf2.png")}),300),setTimeout((function(){e.setAttribute("src","./assets/dwarf.png")}),450),setTimeout((function(){e.setAttribute("src","./assets/dwarf2.png")}),750),setTimeout((function(){e.setAttribute("src","./assets/dwarf.png")}),900),setTimeout((function(){e.setAttribute("src","./assets/dwarf3.png")}),1200),setTimeout((function(){e.setAttribute("src","./assets/dwarf.png")}),1350),setTimeout((function(){e.setAttribute("src","./assets/dwarf3.png")}),1650),setTimeout((function(){e.setAttribute("src","./assets/dwarf.png")}),1800),setTimeout((function(){e.setAttribute("src","./assets/dwarf2.png")}),2100),setTimeout((function(){e.setAttribute("src","./assets/dwarf.png")}),2250),setTimeout((function(){e.setAttribute("src","./assets/dwarf2.png")}),2550),setTimeout((function(){e.setAttribute("src","./assets/dwarf.png")}),2700)},setMessage:function(e){document.querySelector(".message p").innerHTML=e},int:function(e){return+e}};n(114);document.addEventListener("DOMContentLoaded",(function(){!function(){try{e.init()}catch(e){console.log("Error Modal: ".concat(e))}try{t.init()}catch(e){console.log("Error Game: ".concat(e))}}()}))})()})();